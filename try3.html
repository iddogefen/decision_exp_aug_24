<!DOCTYPE html>
<html>
  <head>

    <style>
        .hide_cursor {
            cursor: none;
        }
        </style>

    <title>My experiment</title>
    <script src="jspsych/plugins/jspsych.js"></script>
    <!--<script src="jspsych/plugins/jspsych-order.js"></script>-->
    <script src="jspsych/plugins/plugin-instructions.js"></script>
    <script src="jspsych/plugins/plugin-survey-text.js"></script>
    <script src="jspsych/plugins/plugin-html-keyboard-response.js"></script>
    <script src="jspsych/plugins/plugin-image-button-response.js"></script>
    <script src="jspsych/plugins/plugin-image-keyboard-response.js"></script>
    <script src="jspsych/plugins/plugin-html-audio-response.js"></script>
    <script src="jspsych/plugins/plugin-initialize-microphone.js"></script>
    <script src="jspsych/plugins/plugin-fullscreen.js"></script>
    <script src="jspsych/plugins/plugin-preload.js"></script>
    <script src="Tools/Functions.js"></script>


    <link rel="stylesheet" href="jspsych/css/jspsych.css">
  </head>
  <body></body>
  <script>

    /* initialize jsPsych */
    var jsPsych = initJsPsych({
      on_finish: function() {
        jsPsych.data.displayData();
        saveData(data_folder+'All_data/all_data_sub_'+subject_id+".csv", jsPsych.data.get().csv());
        jsPsych.data.get().localSave('csv','mydata.csv');

      }
    });

    /* create timeline */
    var timeline = [];
    // generate a random subject ID with 15 characters
var subject_id = jsPsych.randomization.randomID(15);

// pick a random condition for the subject at the start of the experiment
var condition_assignment = jsPsych.randomization.sampleWithoutReplacement(['conditionA', 'conditionB', 'conditionC'], 1)[0];

// record the condition assignment in the jsPsych data
// this adds a property called 'subject' and a property called 'condition' to every trial
jsPsych.data.addProperties({
  subject: subject_id,
  condition: condition_assignment
});


    /* preload images */
    var preload = {
      type: jsPsychPreload,
      images: ['images/celebrities/1.png', 'images/celebrities/3.png',
       'images/celebrities/5.png', 'images/celebrities/7.png']
    };
    timeline.push(preload);

    var trial_01 = {
  type: jsPsychFullscreen,
  fullscreen_mode: true
}

  /* create timeline */
timeline.push(trial_01);
    
/*
    var trial_02 = {
        type: jsPsychInitializeMicrophone
    };
    timeline.push(trial_02);*/

    /* define welcome message trial */
    var trial_7 = {
    type: jsPsychImageButtonResponse,
    stimulus: [],
    choices: [],
    prompt: "<p>Judge the famous</p>",
    trial_duration: "1800"

    };
    timeline.push(trial_7);

    /* define instructions trial */
    var trial_8 = {
    type: jsPsychImageButtonResponse,
    stimulus: ['images/celebrities/1.png',],
    stimulus_width:"300",
    stimulus_height:'300' ,
    choices: [],
    prompt: "",
    trial_duration: "4500"
    };
    timeline.push(trial_8);

    /* define fixation and test trials */
    var trial_9 = {
    type: jsPsychImageButtonResponse,
    stimulus: [],
    choices: ['1.hate very much', '2.hate', '3.indifferent', '4. love', '5.love very much'],
    prompt: "<p>How much do you love or hate the celebrity?</p>",
    trial_duration: "2700"
    };
    timeline.push(trial_9);


    var trial_10 = {
    type: jsPsychImageButtonResponse,
    stimulus: [],
    choices: [],
    prompt: "",
    trial_duration: "1800"
    };
    timeline.push(trial_10);

    var trial_11= {
    type: jsPsychImageButtonResponse,
    stimulus: [],
    choices: [],
    prompt: "<p>Judge the famous</p>",
    trial_duration: "1800"

    };
    timeline.push(trial_11);

    /* define instructions trial */
    var trial_12 = {
    type: jsPsychImageButtonResponse,
    stimulus: ['images/celebrities/3.png',],
    stimulus_width:"300",
    stimulus_height:'300' ,
    choices: [],
    prompt: "",
    trial_duration: "4500"
    };
    timeline.push(trial_12);

    /* define fixation and test trials */
    var trial_13 = {
    type: jsPsychImageButtonResponse,
    stimulus: [],
    choices: ['1.hate very much', '2.hate', '3.indifferent', '4. love', '5.love very much'],
    prompt: "<p>How much do you love or hate the celebrity?</p>",
    trial_duration: "2700"
    };
    timeline.push(trial_13);


    var trial_14 = {
    type: jsPsychImageButtonResponse,
    stimulus: [],
    choices: [],
    prompt: "",
    trial_duration: "1800"
    };
    timeline.push(trial_14);

    var trial_15= {
    type: jsPsychImageButtonResponse,
    stimulus: [],
    choices: [],
    prompt: "<p>Judge the famous</p>",
    trial_duration: "1800"

    };
    timeline.push(trial_15);

    /* define instructions trial */
    var trial_16 = {
    type: jsPsychImageButtonResponse,
    stimulus: ['images/celebrities/5.png',],
    stimulus_width:"300",
    stimulus_height:'300' ,
    choices: [],
    prompt: "",
    trial_duration: "4500"
    };
    timeline.push(trial_16);

    /* define fixation and test trials */
    var trial_17 = {
    type: jsPsychImageButtonResponse,
    stimulus: [],
    choices: ['1.hate very much', '2.hate', '3.indifferent', '4. love', '5.love very much'],
    prompt: "<p>How much do you love or hate the celebrity?</p>",
    trial_duration: "2700"
    };
    timeline.push(trial_17);


    var trial_18 = {
    type: jsPsychImageButtonResponse,
    stimulus: [],
    choices: [],
    prompt: "",
    trial_duration: "1800"
    };
    timeline.push(trial_18);

    var trial_19= {
    type: jsPsychImageButtonResponse,
    stimulus: [],
    choices: [],
    prompt: "<p>Judge the famous</p>",
    trial_duration: "1800"

    };
    timeline.push(trial_19);

    /* define instructions trial */
    var trial_20 = {
    type: jsPsychImageButtonResponse,
    stimulus: ['images/celebrities/7.png',],
    stimulus_width:"300",
    stimulus_height:'300' ,
    choices: [],
    prompt: "",
    trial_duration: "4500"
    };
    timeline.push(trial_20);

    /* define fixation and test trials */
    var trial_21 = {
    type: jsPsychImageButtonResponse,
    stimulus: [],
    choices: ['1.hate very much', '2.hate', '3.indifferent', '4. love', '5.love very much'],
    prompt: "<p>How much do you love or hate the celebrity?</p>",
    trial_duration: "2700"
    };
    timeline.push(trial_21);


    var trial_22 = {
    type: jsPsychImageButtonResponse,
    stimulus: [],
    choices: [],
    prompt: "",
    trial_duration: "1800"
    };
    timeline.push(trial_22);
    
        /* start the experiment 

    var trial_23 = {
    type: jsPsychHtmlAudioResponse,
    stimulus: `
        <p>Please sing the first few seconds of a song and click the button when you are done.</p>`,
    recording_duration: "15000",
    allow_playback: true,
    on_finish: function(data){
        fetch('/save-my-data.php', { audio_base64: data.response })
            .then((audio_id))

    }
};
    timeline.push(trial_23);*/

    var trial_24 = {
    type: jsPsychSurveyText,
    questions: [
    {prompt: 'Write the list of celebs you saw'}
  ]
    };
    timeline.push(trial_24);

    /* start the experiment */
    jsPsych.run(timeline);
    

  </script>
</html>
